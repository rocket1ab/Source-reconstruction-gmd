# A spatiotemporally separated framework for reconstructing the source of atmospheric radionuclide releases
**Update 05/05/2024**: Added example data and rearranged the code.

## Requirements
* graphviz==0.14.2
* hyperopt==0.2.5
* lightgbm==3.1.1
* matplotlib==3.1.3
* numpy==1.21.5
* pandas==1.1.5
* scikit_learn==0.23.2
* scipy==1.7.3
* xgboost==1.2.1
* xlrd==1.1.0

## Example data
The example data for running the code is stored in the datafile.mat.

## Installation
We recommend installing relevant dependencies in a virtual environment of the Anaconda. If so, you could create a virtual environment by running the following code in the command line of Anaconda Prompt:
```
conda create -n your_env_name python=3.7.6
conda activate your_env_name
```
After unzipping the zip file, you can finish the installation by the following code:
```
cd Source-reconstruction-gmd
pip install -r requirements.txt
```
## Choose datasets

You can choose one dataset for source localization. We provide four datasets: Oct3, Oct4, Group1, and Group2. You can enter corresponding file folder and run the code. Take Group1 for example:

```
cd Group1
```

The measurements are stored in the file under the directory './Measurements'. The simulation data under different source locations are stored in the directory './Simulation_datasets'. Based on these datasets, the file 'datafile.mat' can be generated by running the following code:

```
python Generate_mat.py
```

## Usage

### Step1 Generate training_dataset
```
python Build_feature_training_dataset.py
```
### Step2 Generate testing_datasets
```
python Build_feature_testing_dataset.py
```
### Step3 Train the XGBoost model and output the source localization results
```
ipython -c "%run Source-localization.ipynb"
```

## Results
The training datasets and testing datasets will be stored in the directory './Training_datasets' and './Testing_datasets', respectively.
The source localization results are stored in the directory './Reconstruction_results'.
